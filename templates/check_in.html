{% extends "base.html" %}
{% block title %}Daily Activities - BreakFree{% endblock %}
{% block page_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/check_in.css') }}" />
{% endblock %}
{% block content %}
<div class="main-content">
    <!-- Header Section -->
    <div class="activities-header">
        <div class="header-left">
            <h1>Daily Activities</h1>
            <p>Manage daily activities and schedules</p>
        </div>
        <div class="header-right">
            <button id="addActivityBtn" class="btn btn-primary">
                <i class="fa-solid fa-plus"></i> Add Activity
            </button>
            <button id="viewScheduleBtn" class="btn btn-outline">
                <i class="fa-solid fa-calendar"></i> View Schedule
            </button>
        </div>
    </div>

    <!-- Filter and Search Section -->
    <div class="filter-section">
        <div class="search-box">
            <i class="fa-solid fa-search"></i>
            <input type="text" id="searchInput" placeholder="Search activities...">
        </div>
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="morning">Morning</button>
            <button class="filter-btn" data-filter="afternoon">Afternoon</button>
            <button class="filter-btn" data-filter="evening">Evening</button>
        </div>
    </div>

    <!-- View Toggle -->
    <div class="view-toggle">
        <button id="listViewBtn" class="view-btn active">
            <i class="fa-solid fa-list"></i> List View
        </button>
        <button id="tableViewBtn" class="view-btn">
            <i class="fa-solid fa-table"></i> Weekly Table
        </button>
    </div>

    <!-- Activities List View -->
    <div id="listView" class="activities-container">
        <div id="activitiesList" class="activities-list">
            <!-- Activities will be loaded here -->
        </div>
        <div id="loadingIndicator" class="loading-indicator" style="display: none;">
            <i class="fa-solid fa-spinner fa-spin"></i>
            <span>Loading activities...</span>
        </div>
        <div id="emptyState" class="empty-state" style="display: none;">
            <i class="fa-solid fa-calendar-plus"></i>
            <h3>No activities found</h3>
            <p>Add your first activity to get started</p>
            <button class="btn btn-primary" onclick="document.getElementById('addActivityBtn').click()">
                <i class="fa-solid fa-plus"></i> Add Activity
            </button>
        </div>
    </div>

    <!-- Weekly Table View -->
    <div id="tableView" class="weekly-table-container" style="display: none;">
                <div class="table-header">
                    <h3><i class="fa-solid fa-calendar-week"></i> Weekly Schedule</h3>
                    <p>All activities organized by day and time</p>
                </div>
        <div class="table-wrapper">
            <table class="weekly-schedule-table">
                <thead>
                    <tr>
                        <th class="time-header">Time</th>
                        <th>Monday</th>
                        <th>Tuesday</th>
                        <th>Wednesday</th>
                        <th>Thursday</th>
                        <th>Friday</th>
                        <th>Saturday</th>
                        <th>Sunday</th>
                    </tr>
                </thead>
                <tbody id="weeklyTableBody">
                    <!-- Weekly schedule will be generated here -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add/Edit Activity Modal -->
<div id="activityModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">Add New Activity</h3>
            <button class="close" id="closeModal">&times;</button>
        </div>
        <div class="modal-body">
            <form id="activityForm">
                <div class="form-group">
                    <label for="activityName">Activity Name *</label>
                    <input type="text" id="activityName" name="name" required placeholder="Enter activity name">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="startTime">Start Time *</label>
                        <input type="time" id="startTime" name="startTime" required>
                    </div>
                    <div class="form-group">
                        <label for="endTime">End Time *</label>
                        <input type="time" id="endTime" name="endTime" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="days">Days of Week *</label>
                    <div class="days-selector">
                        <label class="day-checkbox">
                            <input type="checkbox" name="days" value="monday">
                            <span>Mon</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="days" value="tuesday">
                            <span>Tue</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="days" value="wednesday">
                            <span>Wed</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="days" value="thursday">
                            <span>Thu</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="days" value="friday">
                            <span>Fri</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="days" value="saturday">
                            <span>Sat</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="days" value="sunday">
                            <span>Sun</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="activityType">Activity Type</label>
                    <select id="activityType" name="type">
                        <option value="meal">Meal</option>
                        <option value="exercise">Exercise</option>
                        <option value="education">Education</option>
                        <option value="recreation">Recreation</option>
                        <option value="cleaning">Cleaning</option>
                        <option value="spiritual">Spiritual</option>
                        <option value="personal">Personal Care</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" rows="3" placeholder="Optional description"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="isRecurring" name="isRecurring">
                        <span class="checkmark"></span>
                        Recurring Activity
                    </label>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
            <button type="submit" form="activityForm" class="btn btn-primary" id="saveBtn">
                <i class="fa-solid fa-save"></i> Save Activity
            </button>
        </div>
    </div>
</div>

<!-- Schedule View Modal -->
<div id="scheduleModal" class="modal">
    <div class="modal-content schedule-modal">
        <div class="modal-header">
            <h3>Weekly Schedule</h3>
            <button class="close" id="closeScheduleModal">&times;</button>
        </div>
        <div class="modal-body">
            <div id="scheduleView" class="schedule-view">
                <!-- Schedule will be generated here -->
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="modal">
    <div class="modal-content delete-modal">
        <div class="modal-header">
            <h3>Confirm Delete</h3>
            <button class="close" id="closeDeleteModal">&times;</button>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this activity? This action cannot be undone.</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="cancelDeleteBtn">Cancel</button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
                <i class="fa-solid fa-trash"></i> Delete
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/check_in.js') }}"></script>
{% endblock %}
